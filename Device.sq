local tempRecorded = [76.9994,77.1599,76.9994,76.8398,76.5225,76.3609,76.2,76.3609,76.5225,76.3609,76.2,76.0398,75.563,75.0817,74.9226,74.6063,74.4455,74.6063,74.7642,75.0817,75.4022,75.5635,75.7216,75.8804,76.0398,75.8804,75.7216,76.0398,75.8804,74.7642,73.6515,73.0178,72.0682,71.4336,70.7999,70.4872,70.645,70.7999,70.9589,71.2759,71.4336,71.5921,71.9076,72.0682,72.3844,72.5399,72.6997,72.8602,73.0178,73.1761,73.3352,73.4948,73.6515,73.8089,73.9707,74.1295,74.289,74.4455,74.6063,74.7642,74.9226,75.0817,74.6063,74.7642,74.9226,75.0817,75.2416,75.2416,75.0817,75.0817,74.9226,74.7642,74.7642,74.6063,74.4455,74.289,74.1295,74.1295,73.9707,74.1295,73.9707,73.8089,73.6515,73.4948,73.3352,73.1761,72.8602,72.6997,72.5399,72.3844,72.5399,72.3844,72.2259,72.2259,72.0682,72.0682,71.9076,71.9076,72.0682,72.2259,72.0682,72.2259,72.0682,71.9076,72.2259,72.3844,72.5399,72.3844,72.2259,72.0682,71.9076,71.7513,71.5921,71.4336,71.5921,71.7513,71.9076,72.0682,72.2259,72.3844,72.2259,72.3844,72.5399,72.3844,72.2259,71.9076,72.2259,72.3844,72.2259,72.2259,72.3844,72.5399,72.5399,72.6997,72.8602,73.0178,73.1761,73.3352,73.3352,73.4948,73.6515,73.8089,73.9707,74.1295,74.1295,74.289,74.4455,74.289,74.289,74.1295,73.8089,73.6515,73.4948,73.3352,73.0178,72.8602,72.6997,72.3844,72.2259,72.0682,71.9076,71.5921,71.2759,70.9589,70.645,70.4872,70.3267,70.0114,69.6956,69.5387,69.3824,69.2237,69.0656,68.7514,68.5922,68.4336,68.2758,68.5922,68.5922,68.7514,68.5922,68.4336,68.5922,68.4336,68.2758,68.1187,67.9623,67.8034,67.6483,67.0163,66.3864,66.2284,65.7586,65.1273,64.6546,64.0256,63.7082,62.9192,62.1314,61.4986,61.1825,60.5486,60.0757,59.7573,59.4393,59.1218,58.8048,58.6461,58.4858,58.3286,58.1698,58.3286,58.1698,58.0093,57.6905,57.5322,57.2131,57.3723,57.0525,56.8924,56.7333,56.4125,56.2532,56.4125,56.5725,56.2532,56.0924,55.9324,55.6124,55.7731,55.9324,56.4125,57.2131,56.7333,56.4125,55.9324,55.291,54.809,54.4864,53.8399,53.6796,53.3552,53.0318,52.8691,52.5443,52.2184,52.0557,51.8937,51.4047,51.078,50.913,50.7488,51.5682,52.2184,53.1931,54.003,55.4502,57.3723,58.0093,58.6461,59.2802,59.9161,60.392,60.8667,61.3401,61.9728,62.4482,62.9192,63.3938,63.7082,64.0256,64.3401,64.4984,64.6546,64.8114,64.9689,65.1273,65.2862,65.443,65.7586,65.9145,66.0711,66.2284,66.3864,66.5451,66.7015,66.8586,67.0163,67.1748,67.3309,67.4909,67.6483,67.8034,67.9623,68.1187,68.2758,68.2758,68.5922,69.0656,69.6956,69.8531,70.1705,70.3267,70.645,70.7999,70.9589,71.1189,71.2759,71.4336,71.5921,71.7513,72.0682,72.3844,72.8602,73.1761,73.4948,73.8089,74.1295,74.4455,74.7642,74.9226,75.0817,75.4022,75.5635,75.8804,76.3609,76.5225,76.6808,76.9994,77.3209,77.6452,78.1246,78.4477,78.7693,79.094,79.4171,79.7387,80.0631,80.3859,80.7116,81.2011,81.3626,81.5294,81.6925,81.5294,81.3626,81.2011,81.0403,80.8755,80.7116,80.5484,80.7116,80.8755,81.0403,81.2011,81.3626,81.5294,81.6925,81.8562,82.0159,82.347,82.5089,82.6715,82.8348,82.8348,82.9989,83.3292,83.6576,84.1532,84.6504,85.1495,85.3139,85.65,85.984,86.3158,86.4854,86.8162,86.9882,87.1555,87.1555,87.3236,87.4924,87.662,87.8269,87.9981,88.1644,88.3371,88.5049,88.3371,88.3371,88.1644,87.9981,87.8269,87.9981,87.8269,87.662,87.3236,86.9882,86.6504,86.3158,85.984,85.8166,85.4789,85.8166,87.662,89.6959,92.8081,95.6324,97.9775,100.002,101.874,103.582,105.324,106.704,108.301,109.927,111.166,112.217,112.842,113.916,114.777,116.533,116.972,117.428,117.877,117.194,116.315,116.087,115.871,115.646,115.432,115.209,114.777,113.916,112.842];
local timestamp = [1416723273,1416723274,1416723275,1416723276,1416723277,1416723278,1416723279,1416723280,1416723281,1416723282,1416723283,1416723284,1416723285,1416723286,1416723287,1416723288,1416723289,1416723290,1416723291,1416723292,1416723293,1416723294,1416723295,1416723296,1416723297,1416723298,1416723299,1416723300,1416723301,1416723302,1416723303,1416723304,1416723305,1416723306,1416723307,1416723308,1416723309,1416723310,1416723311,1416723312,1416723313,1416723314,1416723315,1416723316,1416723317,1416723318,1416723319,1416723320,1416723321,1416723322,1416723323,1416723324,1416723325,1416723326,1416723327,1416723328,1416723329,1416723330,1416723331,1416723332,1416723333,1416723334,1416723335,1416723336,1416723337,1416723338,1416723339,1416723340,1416723341,1416723342,1416723343,1416723344,1416723345,1416723346,1416723347,1416723348,1416723349,1416723350,1416723351,1416723352,1416723353,1416723354,1416723355,1416723356,1416723357,1416723358,1416723359,1416723360,1416723361,1416723362,1416723363,1416723364,1416723365,1416723366,1416723367,1416723368,1416723369,1416723370,1416723371,1416723372,1416723373,1416723374,1416723375,1416723376,1416723377,1416723378,1416723379,1416723380,1416723381,1416723382,1416723383,1416723384,1416723385,1416723386,1416723387,1416723388,1416723389,1416723390,1416723391,1416723392,1416723393,1416723394,1416723395,1416723396,1416723397,1416723398,1416723399,1416723400,1416723401,1416723402,1416723403,1416723404,1416723405,1416723406,1416723407,1416723408,1416723409,1416723410,1416723411,1416723412,1416723413,1416723414,1416723415,1416723416,1416723417,1416723418,1416723419,1416723420,1416723421,1416723422,1416723423,1416723424,1416723425,1416723426,1416723427,1416723428,1416723429,1416723430,1416723431,1416723432,1416723433,1416723434,1416723435,1416723436,1416723437,1416723438,1416723439,1416723440,1416723441,1416723442,1416723443,1416723444,1416723445,1416723446,1416723447,1416723448,1416723449,1416723450,1416723451,1416723452,1416723453,1416723454,1416723455,1416723456,1416723457,1416723458,1416723459,1416723460,1416723461,1416723462,1416723463,1416723464,1416723465,1416723466,1416723467,1416723468,1416723469,1416723470,1416723471,1416723472,1416723473,1416723474,1416723475,1416723476,1416723477,1416723478,1416723479,1416723480,1416723481,1416723482,1416723483,1416723484,1416723485,1416723486,1416723487,1416723488,1416723489,1416723490,1416723491,1416723492,1416723493,1416723494,1416723495,1416723496,1416723497,1416723498,1416723499,1416723500,1416723501,1416723502,1416723503,1416723504,1416723505,1416723506,1416723507,1416723508,1416723509,1416723510,1416723511,1416723512,1416723513,1416723514,1416723515,1416723516,1416723517,1416723518,1416723519,1416723520,1416723521,1416723522,1416723523,1416723524,1416723525,1416723526,1416723527,1416723528,1416723529,1416723530,1416723531,1416723532,1416723533,1416723534,1416723535,1416723536,1416723537,1416723538,1416723539,1416723540,1416723541,1416723542,1416723543,1416723544,1416723545,1416723546,1416723547,1416723548,1416723549,1416723550,1416723551,1416723552,1416723553,1416723554,1416723555,1416723556,1416723557,1416723558,1416723559,1416723560,1416723561,1416723562,1416723563,1416723564,1416723565,1416723566,1416723567,1416723568,1416723569,1416723570,1416723571,1416723572,1416723573,1416723574,1416723575,1416723576,1416723577,1416723578,1416723579,1416723580,1416723581,1416723582,1416723583,1416723584,1416723585,1416723586,1416723587,1416723588,1416723589,1416723590,1416723591,1416723592,1416723593,1416723594,1416723595,1416723596,1416723597,1416723598,1416723599,1416723600,1416723601,1416723602,1416723603,1416723604,1416723605,1416723606,1416723607,1416723608,1416723609,1416723610,1416723611,1416723612,1416723613,1416723614,1416723615,1416723616,1416723617,1416723618,1416723619,1416723620,1416723621,1416723622,1416723623,1416723624,1416723625,1416723626,1416723627,1416723628,1416723629,1416723630,1416723631,1416723632,1416723633,1416723634,1416723635,1416723636,1416723637,1416723638,1416723639,1416723640,1416723641,1416723642,1416723643,1416723644,1416723645,1416723646,1416723647,1416723648,1416723649,1416723650,1416723651,1416723652,1416723653,1416723654,1416723655,1416723656,1416723657,1416723658,1416723659,1416723660,1416723661,1416723662,1416723663,1416723664,1416723665,1416723666,1416723667,1416723668,1416723669,1416723670,1416723671,1416723672,1416723673,1416723674,1416723675,1416723676,1416723677,1416723678,1416723679,1416723680,1416723681,1416723682,1416723683,1416723684,1416723685,1416723686,1416723687,1416723688,1416723689,1416723690,1416723691,1416723692,1416723693,1416723694,1416723695,1416723696,1416723697,1416723698,1416723699,1416723700,1416723701,1416723702,1416723703,1416723704,1416723705,1416723706,1416723707,1416723708,1416723709,1416723710,1416723711,1416723712,1416723713,1416723714,1416723715,1416723716,1416723717,1416723718,1416723719,1416723720,1416723721,1416723722,1416723723,1416723724,1416723725,1416723726,1416723727,1416723728,1416723729,1416723730,1416723731,1416723732,1416723733,1416723734,1416723735,1416723736,1416723737,1416723738,1416723739,1416723740,1416723741,1416723742,1416723743,1416723744,1416723745,1416723746,1416723747,1416723748,1416723749,1416723750,1416723751,1416723752,1416723753,1416723754,1416723755,1416723756,1416723757,1416723758,1416723759,1416723760,1416723761,1416723762,1416723763,1416723764,1416723765,1416723766,1416723767,1416723768,1416723769,1416723770,1416723771,1416723772,1416723773,1416723774,1416723775,1416723776,1416723777,1416723778,1416723779,1416723780,1416723781,1416723782,1416723783,1416723784,1416723785,1416723786,1416723787,1416723788,1416723789,1416723790,1416723791,1416723792,1416723793,1416723794,1416723795,1416723796,1416723797,1416723798,1416723799,1416723800,1416723801,1416723802,1416723803,1416723804,1416723805,1416723806,1416723807,1416723808,1416723809,1416723810,1416723811,1416723812,1416723813,1416723814,1416723815,1416723816,1416723817,1416723818,1416723819,1416723820,1416723821,1416723822,1416723823,1416723824,1416723825,1416723826,1416723827,1416723828,1416723829,1416723830,1416723831,1416723832,1416723833,1416723834,1416723835,1416723836,1416723837,1416723838,1416723839,1416723840,1416723841,1416723842,1416723843,1416723844,1416723845,1416723846,1416723847,1416723848,1416723849,1416723850,1416723851,1416723852,1416723853,1416723854,1416723855,1416723856,1416723857,1416723858,1416723859,1416723860,1416723861,1416723862,1416723863,1416723864,1416723865,1416723866,1416723867,1416723868,1416723869,1416723870,1416723871,1416723872,1416723873,1416723874,1416723875,1416723876,1416723877,1416723878,1416723879,1416723880,1416723881,1416723882,1416723883,1416723884,1416723885,1416723886,1416723887,1416723888,1416723889,1416723890,1416723891,1416723892,1416723893,1416723894,1416723895,1416723896,1416723897,1416723898,1416723899,1416723900,1416723901,1416723902,1416723903,1416723904,1416723905,1416723906,1416723907,1416723908,1416723909,1416723910,1416723911,1416723912,1416723913,1416723914,1416723915,1416723916,1416723917,1416723918,1416723919,1416723920,1416723921,1416723922,1416723923,1416723924,1416723925,1416723926,1416723927,1416723928,1416723929,1416723930,1416723931,1416723932,1416723933,1416723934,1416723935,1416723936,
1416723937,1416723938,1416723939,1416723940,1416723941,1416723942,1416723943,1416723944,1416723945,1416723946,1416723947,1416723948,1416723949,1416723950,1416723951,1416723952,1416723953,1416723954,1416723955,1416723956,1416723957,1416723958,1416723959,1416723960,1416723961,1416723962,1416723963,1416723964,1416723965,1416723966,1416723967,1416723968,1416723969,1416723970,1416723971,1416723972,1416723973,1416723974,1416723975,1416723976,1416723977,1416723978,1416723979,1416723980,1416723981,1416723982,1416723983,1416723984,1416723985,1416723986,1416723987,1416723988,1416723989,1416723990,1416723991];


local count = 0;
// This is our UART polling function. We'll call it once at the beginning of the program,
// then it calls itself every 10us. If there is data in the UART57 buffer, this will read
// as much of it as it can, and send it out of the impee's outputPort.
local size = 435;
function sendDataNoneTolerance()
{
      if(count < size)// otherwise, we keep reading until there is no data to be read.
      {
        imp.wakeup(0.1, sendDataNoneTolerance);    // schedule the next poll in 10us
        local sensorReading = {
          temp = tempRecorded[count],
          time = timestamp[count],
          index = count
        } 
        agent.send("receiver1", sensorReading);
        count++;
      }else {
        //server.log("a");
        //index=0;
      }
}

agent.on("sendDataNoneTolerance" function(msg){
  server.log("a");
  size = msg;
  sendDataNoneTolerance();
});
